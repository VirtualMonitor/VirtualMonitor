TARGETNAME=VirtualMonitorVideo
TARGETTYPE=DRIVER

TARGET_DESTINATION=retail

TARGETLIBS=$(DDK_LIB_PATH)\videoprt.lib \
           $(DDK_LIB_PATH)\ntoskrnl.lib \
           $(DDK_LIB_PATH)\hal.lib \

!include sources.inc

INCLUDES=$(INCLUDES) $(PATH_ROOT)\include;
INCLUDES=$(INCLUDES) $(PATH_ROOT)\src\VBox\Additions\WINNT\include;
INCLUDES=$(INCLUDES) $(PATH_ROOT)\nmake\xpdm;

C_DEFINES=$(C_DEFINES) -DVBOX_XPDM_MINIPORT=1 -DIN_RING0=1 -DRT_OS_WINDOWS=1
C_DEFINES=$(C_DEFINES) -DVBOX_WITH_VIDEOHWACCEL=1 -DLOG_TO_BACKDOOR=1
C_DEFINES=$(C_DEFINES) -DNO_INTERLOCKED_INTRINSICS
C_DEFINES=$(C_DEFINES) -D_SIZE_T_DEFINED
C_DEFINES=$(C_DEFINES) -DDSF_DRIVER

C_DEFINES=$(C_DEFINES) -DVBOX_VERSION_MAJOR=\"0\" -DVBOX_VERSION_MINOR=\"1\" 
C_DEFINES=$(C_DEFINES) -DVBOX_VERSION_BUILD=\"2\" -DVBOX_SVN_REV=\"82870\" 
C_DEFINES=$(C_DEFINES) -DVBOX_VERSION_MAJOR_NR=0 -DVBOX_VERSION_MINOR_NR=1 
C_DEFINES=$(C_DEFINES) -DVBOX_VERSION_BUILD_NR=2 -DVBOX_SVN_REV_NR=82870

MSC_WARNING_LEVEL=$(MSC_WARNING_LEVEL) /wd4996
#MSC_WARNING_LEVEL=$(MSC_WARNING_LEVEL) /wd4005

SOURCES=VBoxMPDriver.cpp \
	VBoxMPVideoPortAPI.cpp \
	VBoxMPInternal.cpp \
	VBoxMPRegistry.cpp \
	VBoxMPIOCTL.cpp \
	VBoxMPUtils.cpp \
	VBoxMPCommon.cpp \
	VBoxMPHGSMI.cpp \
	VBoxMPVidModes.cpp 
